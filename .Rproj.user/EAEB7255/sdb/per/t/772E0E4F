{
    "collab_server" : "",
    "contents" : "## To do\n\n#load libraries\nlibrary(\"plyr\")\nlibrary(\"effects\")\n\nleaf <- read.csv(\".\\\\raw data\\\\leaf_traits.csv\", stringsAsFactors = FALSE)\nwood <- read.csv(\".\\\\raw data\\\\twig_traits.csv\", stringsAsFactors = FALSE)\nfield <- read.csv(\".\\\\raw data\\\\field_data.csv\", stringsAsFactors = FALSE)\nsp_info <- read.csv(\".\\\\raw data\\\\lista_spp_plantas_edited_sf082317.csv\", stringsAsFactors=FALSE)\nplot_data <- read.csv(\"./raw data/30_parcelas_arvores_2015_complet_out_2015_sf_edits.csv\", stringsAsFactors = FALSE)\ncharlight <- read.csv(\"./raw data/CharLight_for_data_entry_sf_092717.csv\")\nfrost <- read.csv(\"./raw data/FrostDamageAll.csv\")\nmax_heights <- read.csv(\"./raw data/species_max_heights.csv\")\n\n#------------------------------------------------------------------------------\n# Clean up trait data\n#------------------------------------------------------------------------------\nleaf_reduced <- leaf[!(leaf$Individual %in% c(\"Omit\", \"omit\")), c(\"Individual\", \"Leaflet.or.leaf.size..mm2.\", \"Total.leaf.size..mm2.\",\n                                                                  \"Leaf.thickness.1..mm.\", \"Leaf.thickness.2..mm.\", \"Leaf.thickness.3..mm.\", \"SLA..cm2.g.1.\")]\nleaf_reduced$Leaf.thickness.1..mm. <- as.numeric(leaf_reduced$Leaf.thickness.1..mm.)\nleaf_reduced$Leaf.thickness.2..mm. <- as.numeric(leaf_reduced$Leaf.thickness.2..mm.)\nleaf_reduced$Leaf.thickness.3..mm. <- as.numeric(leaf_reduced$Leaf.thickness.3..mm.)\nleaf_reduced[leaf_reduced$SLA..cm2.g.1. == \"#VALUE\", \"SLA..cm2.g.1.\"] <- NA\nleaf_reduced[leaf_reduced$SLA..cm2.g.1. == 0, \"SLA..cm2.g.1.\"] <- NA\nleaf_reduced$SLA..cm2.g.1. <- as.numeric(leaf_reduced$SLA..cm2.g.1.)\n\n\nwood_reduced <- wood[!(wood$Individual %in% c(\"Omit\", \"omit\")), c(\"Individual\", \"Outer.diameter\", \"Twig.bark.thickness\", \"Relative.bark.thickness\", \"Density..g.mL.\")]\n\nfield_reduced <- field[!(field$Individual %in% c(\"Omit\", \"omit\")), c(\"Individual\", \"X\", \"Code\", \"D30\", \"DBH\", \"Ht\", \"Lower.leaf\", \"Bark1\", \"Bark2\", \"Bark3\", \"Light\")]\nnames(field_reduced)[2] <- \"Bonus\"\n\n#get max DBH and max D30\nfield_reduced$max_d30 <- vapply(strsplit(field_reduced$D30, split = \",\"), \n                                1, FUN = function(x){return(as.numeric(max(unlist(x))))})\nfield_reduced$max_DBH <- vapply(strsplit(field_reduced$DBH, split = \",\"), \n                                1, FUN = function(x){return(as.numeric(max(unlist(x))))})\n# field_reduced$BA <- vapply(strsplit(field_reduced$D30, split = \",\"), \n#                            1, FUN = function(x){return(as.numeric( sum(3.14159 * (as.numeric(unlist(x))^2 ))))})\n\n\n#Change some codes for synonymous species\nsp_info[sp_info$Species == \"Campomanesia guaviroba\", \"Code\"] <- \"CAGU2\"\nsp_info[sp_info$Species == \"Chromolaena maximilianii\", \"Code\"] <- \"CHMA2\"\nsp_info[sp_info$Species == \"Myrcia tomentosa\" & sp_info$FG == \"S\", \"Code\"] <- \"MYTO_S\" #MYTO has two entries, changing this makes it a generalist\nsp_info[sp_info$Species == \"Ocotea puberula\", \"Code\"] <- \"OCPU2\"\nsp_info[sp_info$Species == \"Ocotea velutina\", \"Code\"] <- \"OCVE2\"\n\nclean_data <- join(join(join(join(field_reduced, leaf_reduced, by = c(\"Individual\"), type = \"left\"),\n                   wood_reduced, by = c(\"Individual\"), type = \"left\"),\n                   sp_info, by = c(\"Code\"), type = \"left\"), \n                   max_heights[, c(2,3)], by = c(\"Code\"), type = \"left\")\n  \n#### Adding/calculating some variables\nclean_data$Mean.Leaf.thickness <- NA\nclean_data$Mean.Bark.thickness <- NA\nclean_data$Crown.ratio <- NA\nclean_data$Taper <- NA\nclean_data$Inner.diam <- NA\nclean_data$Stem.rel.bark.thick <- NA\n\nfor(i in 1:nrow(clean_data)){\n  clean_data$Mean.Leaf.thickness[i] <- mean(unlist(clean_data[i, c(\"Leaf.thickness.1..mm.\", \"Leaf.thickness.2..mm.\", \"Leaf.thickness.3..mm.\")]), na.rm=TRUE)\n  clean_data$Mean.Bark.thickness[i] <- mean(unlist(clean_data[i, c(\"Bark1\", \"Bark2\", \"Bark3\")]), na.rm=TRUE)\n  clean_data$Crown.ratio[i] <- (clean_data$Ht[i] - clean_data$Lower.leaf[i]) / clean_data$Ht[i]\n  clean_data$Taper[i] <- clean_data$Ht[i] / clean_data$max_d30[i]\n  clean_data$Inner.diam[i] <- clean_data$max_d30[i] - clean_data$Mean.Bark.thickness[i]/5\n  clean_data$Stem.rel.bark.thick[i] <- (clean_data$Mean.Bark.thickness[i]/5)/ clean_data$max_d30[i]  \n}\n\n\n\n#Write data\nwrite.csv(clean_data, \".\\\\clean data\\\\clean_data.csv\")\n\n\n\n#------------------------------------------------------------------------------\n# Clean up plot data\n#------------------------------------------------------------------------------\n\nplot_data <- plot_data[, !(colnames(plot_data) %in% c(\"X\", \"X.1\", \"X.2\", \"X.3\", \"X.4\"))]\n\n\n#fix some special characters in diameter data\nplot_data$D30 <- gsub(\"=\", \"\", plot_data$D30)\nplot_data$D30 <- gsub(\"\\\\(\", \"\", plot_data$D30)\nplot_data$D30 <- gsub(\"\\\\)\", \"\", plot_data$D30)\nplot_data$DBH <- gsub(\"=\", \"\", plot_data$DBH)\nplot_data$DBH <- gsub(\"\\\\(\", \"\", plot_data$DBH)\nplot_data$DBH <- gsub(\"\\\\)\", \"\", plot_data$DBH)\n\nplot_data_no_equals <- plot_data[plot_data$Species != \"=\", ]\n\nfor(i in 1:nrow(plot_data_no_equals)){\n  tree_number <- plot_data_no_equals[i, \"Number\"]\n  \n  if(length(plot_data[plot_data$Number == tree_number, \"Number\"])>1){ #for those tree with  more than one entry\n    \n    plot_data_no_equals[i, \"DBH\"] <- paste(plot_data[plot_data$Number == tree_number, \"DBH\"], collapse = \"+\") #add other entry to DBH\n    if(length(plot_data[plot_data$Number == tree_number, \"D30\"])>0){ # do the same for D30\n      which_d30 <- sapply(plot_data[plot_data$Number == tree_number, \"D30\"], FUN = function(x){x!=\"\"})\n      \n      plot_data_no_equals[i, \"D30\"] <- paste(plot_data[plot_data$Number == tree_number, \"D30\"][which_d30], collapse = \"+\")\n      \n      \n    }\n    \n  }\n}\n\n\n#convert species name to a 4-letter code\nplot_data_no_equals$Code <- as.character(sapply(plot_data_no_equals$Species, FUN = function(x){toupper(paste(substr(unlist(strsplit(x , split = \" \")), 1, 2), collapse = \"\"))}))\n\n\n#Clean up codes and some other issues\nplot_data_no_equals[plot_data_no_equals$Species == \"Campomanesia guaviroba\", \"Code\"] <- \"CAGU2\"\nplot_data_no_equals[plot_data_no_equals$Species == \"Chromolaena maximilianii\", \"Code\"] <- \"CHMA2\"\nplot_data_no_equals[plot_data_no_equals$Species == \"Ocotea puberula\", \"Code\"] <- \"OCPU2\"\nplot_data_no_equals[plot_data_no_equals$Species == \"Ocotea velutina\", \"Code\"] <- \"OCVE2\"\nplot_data_no_equals[plot_data_no_equals$Species == \"Diospyros hispida\", \"Code\"] <- \"DIBU\"\nplot_data_no_equals[plot_data_no_equals$Species == \"Lippia sidoides\", \"Code\"] <- \"LISA\" #use same values for LISA and LISI\n\n\n#fix some mis-entered data\nplot_data_no_equals[plot_data_no_equals$Species == \"Anadenanthera falcata\" & \n                      plot_data_no_equals$Ht == 55, \"Ht\"] <- 5.5\nplot_data_no_equals[plot_data_no_equals$Number == 4393, \"Ht\"] <- 1.9\nplot_data_no_equals[plot_data_no_equals$Number == 4319, \"Ht\"] <- 1.8\nplot_data_no_equals[plot_data_no_equals$Number == 4413, \"DBH\"] <- 19.3\nplot_data_no_equals[plot_data_no_equals$Number == 4204, \"DBH\"] <- 13.3\nplot_data_no_equals[plot_data_no_equals$Number == 4462, \"DBH\"] <- 14.4\nplot_data_no_equals[plot_data_no_equals$Number == 5761, \"DBH\"] <- 7.8\nplot_data_no_equals[plot_data_no_equals$Number == 2275, \"DBH\"] <- 7.4\nplot_data_no_equals[plot_data_no_equals$Number == 3302, \"DBH\"] <- 7.2\nplot_data_no_equals[plot_data_no_equals$Number == 7166, \"DBH\"] <- 5.8\nplot_data_no_equals[plot_data_no_equals$Number == 4204, \"DBH\"] <- 13.3\nplot_data_no_equals[plot_data_no_equals$Number == 4413, \"DBH\"] <- 19.3\nplot_data_no_equals[plot_data_no_equals$Number == 4462, \"DBH\"] <- 11.4\n\nplot_data_no_equals[plot_data_no_equals$Number == 3577, \"D30\"] <- 8.6\nplot_data_no_equals[plot_data_no_equals$Number == 1162, \"D30\"] <- 8.5\nplot_data_no_equals[plot_data_no_equals$Number == 5777, \"D30\"] <- 7.3\nplot_data_no_equals[plot_data_no_equals$Number == 4488, \"D30\"] <- 7.1\nplot_data_no_equals[plot_data_no_equals$Number == 3469, \"D30\"] <- 4.7\nplot_data_no_equals[plot_data_no_equals$Number == 5269, \"D30\"] <- 4.5\nplot_data_no_equals[plot_data_no_equals$Number == 2879, \"D30\"] <- 4.3\nplot_data_no_equals[plot_data_no_equals$Number == 5269, \"D30\"] <- 4.5\nplot_data_no_equals[plot_data_no_equals$Number == 5269, \"D30\"] <- 4.5\nplot_data_no_equals[plot_data_no_equals$Number == 5269, \"D30\"] <- 4.5\n\n\n#calculate max diameters and cross-sectional areas for all trees; replace NaNs and Infs with NA\nplot_data_no_equals$Max_DBH <- as.numeric(sapply(plot_data_no_equals$DBH, FUN = function(x){max(as.numeric(unlist(strsplit(x, split = \"+\", \n                                                                                                                           fixed = TRUE, perl = FALSE, useBytes = FALSE))))}))\nplot_data_no_equals$Max_DBH <- ifelse(!is.finite(plot_data_no_equals$Max_DBH), NA, plot_data_no_equals$Max_DBH)\n\n\nplot_data_no_equals$Max_D30 <- as.numeric(sapply(plot_data_no_equals$D30, FUN = function(x){max(as.numeric(unlist(strsplit(x, split = \"+\", \n                                                                                                                           fixed = TRUE, perl = FALSE, useBytes = FALSE))))}))\nplot_data_no_equals$Max_D30 <- ifelse(!is.finite(plot_data_no_equals$Max_D30), NA, plot_data_no_equals$Max_D30)\n\n\nplot_data_no_equals$CSA_BH <- as.numeric(sapply(plot_data_no_equals$DBH, FUN = function(x){sum((((as.numeric(unlist(strsplit(x, split = \"+\", \n                                                                                                                             fixed = TRUE, perl = FALSE, useBytes = FALSE))))/2)^2)*3.14159)}))\nplot_data_no_equals$CSA_BH <- ifelse(!is.finite(plot_data_no_equals$CSA_BH), NA, plot_data_no_equals$CSA_BH)\n\nplot_data_no_equals$CSA_30 <- as.numeric(sapply(plot_data_no_equals$D30, FUN = function(x){sum((((as.numeric(unlist(strsplit(x, split = \"+\", \n                                                                                                                             fixed = TRUE, perl = FALSE, useBytes = FALSE))))/2)^2)*3.14159)}))\nplot_data_no_equals$CSA_30 <- ifelse(!is.finite(plot_data_no_equals$CSA_30), NA, plot_data_no_equals$CSA_30)\n\nplot_data_no_equals$Density_expand <- ifelse(!is.na(plot_data_no_equals$Max_D30), \n                                             ifelse(plot_data_no_equals$Max_D30 > 5, 1, 4), ifelse(plot_data_no_equals$Max_DBH > 5, 1, 4)) \n                                             \n\nplot_data_no_equals$CSA_30_expand <- plot_data_no_equals$CSA_30 * plot_data_no_equals$Density_expand\n\nplot_data_no_equals$CSA_BH_expand <- plot_data_no_equals$CSA_BH * plot_data_no_equals$Density_expand\n\nplot_data_no_equals <- join(plot_data_no_equals, sp_info[, c(2:4)], by = c(\"Code\"), type = \"left\")\n\nwrite.csv(plot_data_no_equals, paste0(\"./Clean data/plot_data\", Sys.Date(), \".csv\"))\n\n#------------------------------------------------------------------------------\n#Doing some bark data manipulation\n#------------------------------------------------------------------------------\n\n## Get relative bark thickness for stems\n\nbark_table <- clean_data[, c(\"Code\", \"max_d30\", \"Mean.Bark.thickness\")]\n\n## Get relative bark thickness for twigs\n\nbark_table_2 <- clean_data[, c(\"Code\", \"Outer.diameter\", \"Twig.bark.thickness\")]\nbark_table_2$Outer.diameter <- bark_table_2$Outer.diameter / 10\nnames(bark_table_2) <- names(bark_table)\nbark_table <- rbind(bark_table, bark_table_2) #combine all bark measurements into one data frame\n\n\nbark_model_global  <- lm(Mean.Bark.thickness ~ Code*log(max_d30), data = bark_table)\nsaveRDS(bark_model_global, \"./clean data/bark_model.RDS\")\n\n#-------------------------------------------------------------------------\n# Spruce up frost and light data\n#-------------------------------------------------------------------------\n\nfrost_temp <- frost[, c(\"placa\", \"light\")]\nnames(frost_temp)[1] <- \"N.\"\nfrost_temp$\"N.\" <- as.character(frost_temp$\"N.\")\nfrost_temp <- frost_temp[complete.cases(frost_temp), ]\nfrost_temp <- frost_temp[ frost_temp$\"N.\" != \"\", ]\n\n#fix one row\nfrost_temp[frost_temp$N. == 5566, \"light\"] <- 2\n\ncharlight <- join(charlight, frost_temp, by = c(\"N.\"), type = \"full\")\n\n#move data from frost light to charlight for those where charlight is missing light\ncharlight[is.na(charlight$Light.code), \"Light.code\"] <- charlight[is.na(charlight$Light.code), \"light\"]\n\nfrost$placa <- as.character(frost$placa)\ncharlight$\"N.\" <- as.character(charlight$\"N.\")\ncharlight_temp <- charlight[charlight$\"N.\" != \"\" & !(is.na(charlight$\"N.\")), ]\nnames(charlight_temp)[5] <- \"placa\"\ncharlight_temp <- charlight_temp[, c(\"placa\", \"Light.code\")]\n\n# frost_new <- join(frost, charlight_temp, by = c(\"placa\"), type = \"left\")\n\n# write.csv(frost_new, paste0(\"./clean data/FrostDamageMerged\", Sys.Date(), \".csv\"))\n\n\ncharlight$Code <- as.character(sapply(as.character(charlight$EspÃ©cie), FUN = function(x){toupper(paste(substr(unlist(strsplit(x , split = \" \")), 1, 2), collapse = \"\"))}))\n\ncharlight[charlight$Code == \"DIHI\", \"Code\"] <- \"DIBU\"\nnames(charlight)[5] <- \"Number\"\n\nplot_data_no_equals <- join(plot_data_no_equals, charlight[, c(\"Number\", \"Light.code\")], by = c(\"Number\"), type = \"left\" )\n\nwrite.csv(plot_data_no_equals, paste0(\"./Clean data/plot_data\", Sys.Date(), \".csv\"))\n\n#------------------------------------------------------------------------\n# Create species-level data\n#------------------------------------------------------------------------\n\n#initialize species-level dataframe\nclean_species <- data.frame(Code = unique(clean_data$Code),\n                            N = numeric(length(unique(clean_data$Code))),\n                            Leaf_size = numeric(length(unique(clean_data$Code))),\n                            Total_leaf_size = numeric(length(unique(clean_data$Code))),\n                            Leaf_thickness = numeric(length(unique(clean_data$Code))),\n                            Max_height = numeric(length(unique(clean_data$Code))),\n                            Height_at_5cm = numeric(length(unique(clean_data$Code))),\n                            Crown_ratio_at_5cm = numeric(length(unique(clean_data$Code))),\n                            Light_at_5cm = numeric(length(unique(clean_data$Code))),\n                            SLA = numeric(length(unique(clean_data$Code))),\n                            Bark_at_5cm = numeric(length(unique(clean_data$Code))),\n                            Bark_at_8mm = numeric(length(unique(clean_data$Code))),\n                            #Leaf_N = numeric(length(unique(clean_data$Code))),\n                            Wood_density = numeric(length(unique(clean_data$Code))),\n                            FG = character(length(unique(clean_data$Code))),\n                            Habit = character(length(unique(clean_data$Code))),\n                            stringsAsFactors = FALSE\n)\n\n\nfor(i in 1:length(unique(clean_data$Code))){\n  code_select <- unique(clean_data$Code)[i]\n  data_select <- clean_data[clean_data$Code == code_select, ]\n  \n  clean_species$N[i] <- nrow(data_select)#length(which(complete.cases(data_select)))\n  clean_species$Leaf_size[i] <- mean(data_select$Leaflet.or.leaf.size..mm2., na.rm = TRUE)\n  clean_species$Total_leaf_size[i] <- mean(data_select$Total.leaf.size..mm2., na.rm = TRUE)\n  clean_species$Leaf_thickness[i] <- mean(data_select$Mean.Leaf.thickness, na.rm = TRUE)\n  clean_species$SLA[i] <-mean(data_select$SLA..cm2.g.1., na.rm = TRUE)\n  clean_species$Wood_density[i] <- mean(data_select$Density..g.mL., na.rm = TRUE)\n  \n  #create regressions for predicting bark thicknesses\n  twig_model  <- lm(Twig.bark.thickness ~ log(Outer.diameter), data = data_select)\n  clean_species$Bark_at_8mm[i] <- predict(twig_model, newdata = list(Outer.diameter = 8))\n  \n  clean_species$Bark_at_5cm[i] <- predict(bark_model_global, newdata = list(max_d30 = 5, Code = code_select))\n  \n  #Height at 5cm\n  # for species with data, use data from the plots. Else use data from field\n  if(nrow(subset(plot_data_no_equals, Code == code_select)) > 5){\n    height_model <- lm(Ht ~ as.numeric(Max_D30), data = subset(plot_data_no_equals, Code == code_select & !(is.na(Max_D30))))\n    clean_species$Height_at_5cm[i] <- predict(height_model, newdata = list(Max_D30 = 5))\n  } else if(nrow(data_select) > 3) { #build regression from field data\n    height_model <- lm(Ht ~ as.numeric(max_d30), data = data_select)\n    clean_species$Height_at_5cm[i] <- predict(height_model, newdata = list(max_d30 = 5)) / 100 #divide by 100 to convert cm to m\n  } else{ clean_species$Height_at_5cm[i] <- NA}\n  \n  #Crown ratio at 5cm\n  cr_model <- lm(Crown.ratio ~ max_d30, data = data_select)\n  clean_species$Crown_ratio_at_5cm[i] <- predict(cr_model, newdata = list(max_d30 = 5))\n  \n  #FG\n  clean_species$FG[i] <- as.character(data_select$FG[1])\n  \n  #Light at 5cm\n  light_data <- charlight[charlight$Code == code_select, ]\n  \n  if(nrow(subset(plot_data_no_equals, Code == code_select)) > 5){\n    light_data <- join(light_data, plot_data_no_equals, by = c(\"Number\"), type = \"left\")\n    light_model <- lm(as.numeric(Light.code) ~ log(Max_D30), data = light_data)\n    \n    # plot(as.numeric(Light.code) ~ Max_D30, data = light_data)\n    # tryCatch(plot(allEffects(light_model, partial.residuals = TRUE), main = code_select),\n    # error=function(e){}) # skip species that create errors\n    \n    clean_species$Light_at_5cm[i] <- predict(light_model, newdata = list(Max_D30 = 5))\n    } else if(nrow(data_select) > 3){ #build regression from field data\n      light_model <- lm(as.numeric(Light) ~ max_d30, data = data_select)\n\n      tryCatch(clean_species$Light_at_5cm[i] <- predict(light_model, newdata = list(max_d30 = 5)),\n               error=function(e){})\n  } else{ clean_species$Height_at_5cm[i] <- NA}\n  \n  \n  #Habit\n  clean_species$Habit[i] <- as.character(data_select$Life.Form[1])\n  \n  clean_species$Max_height[i] <- as.numeric(data_select$Max.height[1])\n  \n  \n}\n\nwrite.csv(clean_species, paste0(\"./clean data/clean_species\", Sys.Date(), \".csv\"))\n\n\n# \n# \n# \n# \n# \n# \n# \n# \n# \n# #-----------------------------------------------------------------------------------------------------\n# ### Not needed\n# \n# \n# #################\n# ## Compare codes\n# #################\n# \n# names(leaf)\n# leaf$Individual\n# names(wood)\n# wood$Individual\n# names(field)\n# field$Individual\n# \n# check_names <- leaf[!(leaf$Individual %in% wood$Individual), ]\n# \n# check_names2 <- wood[!(wood$Individual %in% leaf$Individual), ]\n# \n# check_names3 <- leaf[!(leaf$Individual %in% field$Individual), ]\n# \n# check_names4 <- field[!(field$Individual %in% leaf$Individual), ]\n# \n# check_names5 <- wood[!(wood$Individual %in% field$Individual), ]\n# \n# check_names6 <- field[!(field$Individual %in% wood$Individual), ]\n# \n# #################################\n# ## Find the max diameter for each species and currently sampled diameters\n# ################################\n# tree_data <- read.csv(\"30_parcelas_arvores_2015_complet_out_2015.csv\", stringsAsFactors = FALSE)\n# names(tree_data)[c(5,6)] <- c(\"Tree.number\", \"Genus.species\")\n# species_table <- read.csv(\"species_table.csv\")\n# \n# tree_data$max_D30 <- NA\n# \n# for(i in (1:nrow(tree_data))){\n#   \n#   tree_data$max_D30[i] <- max(as.numeric(unlist(strsplit(tree_data[i, \"D..30cm.\"], split = \"+\", \n#                                                          fixed = TRUE, perl = FALSE, useBytes = FALSE))))\n#   \n# }\n# \n# tree_data_merge <- merge(tree_data, species_table, sort = FALSE)\n# \n# need_sample <- data.frame(Code = unique(field$Code),\n#                           max_D30 = numeric(length(unique(field$Code))),\n#                           max_sampled = numeric(length(unique(field$Code))))\n# \n# for(i in 1:nrow(need_sample)){\n#   need_sample$max_D30[i] <- max(tree_data_merge[as.character(tree_data_merge$Code) == \n#                                                   as.character(need_sample$Code[i]), ]$max_D30,\n#                                 na.rm=TRUE)\n#   need_sample$max_sampled[i] <- max(max(as.numeric(unlist(strsplit(field[as.character(field$Code) == \n#                                             as.character(need_sample$Code[i]), ]$D30, \n#                                             split = \",\", fixed=TRUE)))))\n#   \n# }\n# \n# \n# need_sample_with_abund <- merge(need_sample, species_table)\n# write.csv(need_sample_with_abund, \"need_bark_sample.csv\")\n",
    "created" : 1510775649906.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1926970096",
    "id" : "772E0E4F",
    "lastKnownWriteTime" : 1510936756,
    "last_content_update" : 1510936756893,
    "path" : "C:/Users/Sam/Google Drive/Projects/Savanna traits/plant_trait_data_prep_111717.R",
    "project_path" : "plant_trait_data_prep_111717.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}